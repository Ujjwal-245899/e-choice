<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>Election Results</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" rel="stylesheet">
  <style>
        .winner-animation {
            animation: winnerAnimation 2s infinite;
        }

        @keyframes winnerAnimation {
            0%, 100% { color: #4caf50; }
            50% { color: #ffeb3b; }
        }

        .card {
            transition: transform 0.5s;
        }

        .card:hover {
            transform: scale(1.05);
        }
    </style>
</head>
<body class="bg-gray-100">
<div class="container mx-auto p-4">
  <h1 class="text-4xl font-bold text-center mb-8">Election Results for <span th:text="${election.name}"></span></h1>

  <div class="bg-white p-6 rounded-lg shadow-lg">
    <h2 class="text-2xl font-semibold mb-4">Candidates</h2>
    <table class="min-w-full bg-white mb-8">
      <thead>
      <tr>
        <th class="py-2 px-4 border-b border-gray-200">Name</th>
        <th class="py-2 px-4 border-b border-gray-200">Vote Count</th>
        <th class="py-2 px-4 border-b border-gray-200">Percentage</th>
      </tr>
      </thead>
      <tbody>
      <tr th:each="candidate : ${candidates}">
        <td class="py-2 px-4 border-b border-gray-200" th:text="${candidate.name}"></td>
        <td class="py-2 px-4 border-b border-gray-200" th:text="${candidate.voteCount}"></td>
        <td class="py-2 px-4 border-b border-gray-200">
          <div class="relative pt-1">
            <div class="overflow-hidden h-2 text-xs flex rounded bg-blue-200">
              <div th:style="'width:' + ${votePercentages[candidate.name]} + '%'" class="shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-blue-500"></div>
            </div>
            <span th:text="${#numbers.formatDecimal(votePercentages[candidate.name], 1, 2)} + '%'"></span>
          </div>
        </td>
      </tr>
      </tbody>
    </table>

    <div class="card white darken-1">
      <div class="card-content">
        <span class="card-title text-2xl font-semibold">Statistics</span>
        <p class="text-lg">Total Votes: <span th:text="${totalVotes}"></span></p>
        <p class="text-lg winner-animation">Winner: <span th:text="${winner != null ? winner.name : 'No winner determined'}"></span></p>
      </div>
      <div class="card-action">
        <a href="/elections" class="blue-text">Back to Elections</a>
      </div>
    </div>

    <div class="mt-8">
      <h2 class="text-2xl font-semibold mb-4">Election Overview</h2>
      <img src="https://via.placeholder.com/600x300" alt="Election Image" class="rounded-lg shadow-lg mb-4">
      <p class="text-lg">Thank you for participating in the election. Stay tuned for more updates!</p>
    </div>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
</body>
</html>
